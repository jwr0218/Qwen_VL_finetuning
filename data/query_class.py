import json
import random
from dataclasses import dataclass, field
from typing import List

@dataclass
class OCRPrompts:
    """
    VLM 학습/테스트를 위한 OCR 쿼리 프롬프트 모음
    """
    
    # 빨간 박스 + 텍스트별 BBOX 요청 (가장 명확한 요청)
    bbox_ocr_queries: List[str] = field(default_factory=lambda: [
        "이 그림에서 붉은색 박스 안에 있는 모든 텍스트를 개별적으로 인식하고, 각 텍스트의 백분율 바운딩 박스를 추출해 줘.",
        "이미지 내 빨간 상자로 둘러싸인 텍스트들 각각의 내용과, 그 개별 백분위 BBOX 좌표를 알려줘.",
        "빨간색으로 표시된 영역 내 문자를 파악하고, 각 문자의 위치를 백분위 바운딩 박스로 추출해.",
        "이 사진에서 빨간색 테두리 안의 글씨를 모두 인식하고, 그 개별 텍스트별 BBOX를 백분율 좌표계로 알려줘.",
        "적색 상자에 있는 모든 문자를 읽어내고, 그 각각의 바운딩 박스를 백분위로 제공해.",
        "빨간 박스 내의 텍스트와 해당 텍스트의 백분율 BBOX를 모두 쌍으로 묶어 추출해 줘.",
        "붉은색 박스 영역의 OCR 텍스트와, 그 텍스트별 0~100% 좌표를 정리해.",
        "빨간색으로 마크된 부분의 텍스트를 모두 읽어내고, 각 텍스트에 대한 백분율 BBOX를 반환해.",
        "적색 구역 내의 모든 텍스트와 개별 백분위 경계 상자 데이터를 구조화하여 출력해.",
        "빨간 네모 속 텍스트와 그 텍스트별 위치를 퍼센트 BBOX로 계산해 줘.",
        "빨간색으로 하이라이트된 영역의 텍스트를 알려주고, 텍스트별 백분위 좌표의 바운딩 박스를 반환해.",
        "이 사진의 빨간색 경계 상자 속 텍스트를 인식하고, 텍스트별 bbox를 백분율 좌표계로 지정해 줘.",
        "적색 박스로 구획된 문자를 알려주고, 텍스트별 백분율 기반 경계 상자를 추출해 주세요.",
    ])

    # "일반 OCR" (원본 이미지)용 쿼리
    ocr_queries: List[str] = field(default_factory=lambda: [
        "이 그림에서 문자를 찾아내고, 상대적인 백분율 위치 좌표를 돌려줘.",
        "이미지 내의 텍스트 요소를 인식하고, 그 위치를 퍼센트 기준으로 알려줘.",
        "그림 속 글씨를 추출하고, 백분율 좌표 형태로 결과값을 줘.",
        "이 사진에서 텍스트를 인지하고, 백분위 좌표를 출력해.",
        "이미지에서 모든 글자를 식별하고, 위치를 백분율 스케일로 반환해.",
        "그림의 문자 정보를 OCR로 추출하고, 백분위 좌표로 표시해 줘.",
        "이 이미지 파일에서 텍스트를 검출하고, 백분율 기반의 위치 정보를 알려줘.",
        "표시된 이미지에서 텍스트를 읽고, 위치를 퍼센티지 값으로 표시해.",
        "그림에 있는 텍스트를 파싱하고, 백분위 위치 값을 알려줘.",
        "이 이미지의 모든 텍스트 내용을 추출하고, 좌표를 0에서 100 사이의 값으로 줘.",
        "이미지에서 텍스트 블록을 찾고, 그 위치를 백분율 형식으로 알려줘.",
        "사진 속의 글자들을 인식하고, 상대적 위치를 퍼센티지로 계산하여 반환해.",
        "이 그림 자료에서 텍스트를 구분하고, 백분위 좌표계로 위치를 지정해 줘.",
        "이미지의 텍스트 성분을 추출하고, 백분율 단위로 위치를 표시해.",
        "OCR을 이용해 이 이미지의 텍스트와 백분율 위치 정보를 요청해.",
        "그림 속의 문자열을 감지하고, 해당 위치를 백분위로 변환하여 줘.",
        "이 이미지에서 텍스트를 찾고, 좌표계를 정규화(0~100%)하여 반환해.",
        "사진에서 텍스트를 찾아내고, 백분율 기반의 경계 상자 위치를 알려줘.",
        "이미지 내 글씨를 인식하고, 위치 정보를 백분위 좌표로 알려주세요.",
        "이 그림에서 문자를 읽어내고, 위치를 퍼센트 값으로 반환해.",
    ])

    def get_random_ocr_query(self,default_value = 1) -> str:
        """BBOX OCR 쿼리 중 하나를 무작위 반    환"""
        return random.sample(self.ocr_queries, min(len(self.ocr_queries), default_value)) # 3개 또는 그 이하

# --- 사용 예시 ---
if __name__ == "__main__":
    prompts = OCRPrompts()
    
    print(f"일반 쿼리 예시: {prompts.get_random_ocr_query(3)}")